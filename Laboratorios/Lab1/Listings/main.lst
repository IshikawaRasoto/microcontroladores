


ARM Macro Assembler    Page 1 


    1 00000000         ; main.s
    2 00000000         ; Desenvolvido para a placa EK-TM4C1294XL
    3 00000000         ; Prof. Guilherme Peron
    4 00000000         ; Ver 1 19/03/2018
    5 00000000         ; Ver 2 26/08/2018
    6 00000000         ; Este programa deve esperar o usu�rio pressionar uma 
                       chave.
    7 00000000         ; Caso o usu�rio pressione uma chave, um LED deve pisc
                       ar a cada 1 segundo.
    8 00000000         
    9 00000000         ; ------------------------------------------------------
                       -------------------------
   10 00000000                 THUMB                        ; Instru��es do
                                                             tipo Thumb-2
   11 00000000         ; ------------------------------------------------------
                       -------------------------
   12 00000000         
   13 00000000         ; Declara��es EQU - Defines
   14 00000000         ;<NOME>         EQU <VALOR>
   15 00000000         ; ========================
   16 00000000         ; Defini��es de Valores
   17 00000000         
   18 00000000         ; ------------------------------------------------------
                       -------------------------
   19 00000000         ; �rea de Dados - Declara��es de vari�veis
   20 00000000                 AREA             DATA, ALIGN=2
   21 00000000         ; Se alguma vari�vel for chamada em outro arquivo
   22 00000000         ;EXPORT  <var> [DATA,SIZE=<tam>]   ; Permite chamar a va
                       ri�vel <var> a 
   23 00000000         ; partir de outro arquivo
   24 00000000         ;<var> SPACE <tam>                        ; Declara uma 
                       vari�vel de nome <var>
   25 00000000         ; de <tam> bytes a partir da primeira 
   26 00000000         ; posi��o da RAM  
   27 00000000         
   28 00000000         ; ------------------------------------------------------
                       -------------------------
   29 00000000         ; �rea de C�digo - Tudo abaixo da diretiva a seguir 
                       ser� armazenado na mem�ria de 
   30 00000000         ;                  c�digo
   31 00000000                 AREA             |.text|, CODE, READONLY, ALIGN=
2
   32 00000000         
   33 00000000         ; Se alguma fun��o do arquivo for chamada em outro a
                       rquivo 
   34 00000000                 EXPORT           Start       ; Permite chamar a 
                                                            fun��o Start a 
                                                            partir de 
   35 00000000         ; outro arquivo. No caso startup.s
   36 00000000         
   37 00000000         ; Se chamar alguma fun��o externa 
   38 00000000         ;IMPORT <func>              ; Permite chamar dentro dest
                       e arquivo uma 
   39 00000000         ; fun��o <func>
   40 00000000                 IMPORT           PLL_Init
   41 00000000                 IMPORT           SysTick_Init
   42 00000000                 IMPORT           SysTick_Wait1ms
   43 00000000                 IMPORT           GPIO_Init
   44 00000000                 IMPORT           PortN_Output



ARM Macro Assembler    Page 2 


   45 00000000                 IMPORT           Configura_Interrupts
   46 00000000         
   47 00000000                 import           Escreve_Display_Decimo
   48 00000000                 import           Escreve_Display_Unitario
   49 00000000                 import           Escreve_LEDs
   50 00000000                 import           Acende_LED_N0
   51 00000000                 import           Apaga_LED_N0
   52 00000000                 import           Acende_LED_N1
   53 00000000                 import           Apaga_LED_N1
   54 00000000         
   55 00000000         
   56 00000000         ; ------------------------------------------------------
                       -------------------------
   57 00000000         ; Fun��o main()
   58 00000000         
   59 00000000         ; Definicao de registradores e suas funcionalidades esta
                       ticas
   60 00000000         
   61 00000000         ; R8 - Valor do display unitario
   62 00000000         ; R9 - Valor do display dezenas
   63 00000000         ; R10 - Valor da temperatura atual
   64 00000000         ; R11 - Valor da temperatura alvo
   65 00000000         ; R12 - Contador das inetracoes para atraso de 1s na atu
                       alizacao da temperatura
   66 00000000         
   67 00000000         Start
   68 00000000 F7FF FFFE       BL               PLL_Init    ;Chama a subrotina 
                                                            para alterar o cloc
                                                            k do microcontrolad
                                                            or para 80MHz
   69 00000004 F7FF FFFE       BL               SysTick_Init ;Chama a subrotina
                                                             para inicializar o
                                                             SysTick
   70 00000008 F7FF FFFE       BL               GPIO_Init   ;Chama a subrotina 
                                                            que inicializa os G
                                                            PIO
   71 0000000C F7FF FFFE       BL               Configura_Interrupts ;Chama a s
                                                            ubrotina que config
                                                            ura as interrupcoes
                                                            
   72 00000010         
   73 00000010 F04F 0A0F       mov              r10, #15
   74 00000014 F04F 0B19       mov              r11, #25
   75 00000018 F04F 0CA6       mov              r12, #166
   76 0000001C         
   77 0000001C         
   78 0000001C         MainLoop
   79 0000001C         ; ****************************************
   80 0000001C         ; Escrever c�digo que l� o estado da chave, se ela e
                       stiver desativada apaga o LED
   81 0000001C         ; Se estivar ativada chama a subrotina Pisca_LED
   82 0000001C         ; ****************************************
   83 0000001C         
   84 0000001C F04F 0CA6       mov              r12, #166
   85 00000020         
   86 00000020         Loop_1s
   87 00000020 F7FF FFFE       bl               Escreve_Display_Decimo
   88 00000024 F7FF FFFE       bl               Escreve_Display_Unitario
   89 00000028 F7FF FFFE       bl               Escreve_LEDs



ARM Macro Assembler    Page 3 


   90 0000002C         
   91 0000002C F1AC 0C01       sub              r12, r12, #1
   92 00000030 F1BC 0F00       cmp              r12, #0
   93 00000034 D1F4            bne              Loop_1s     ; Verifica se ja pa
                                                            ssou 1s
   94 00000036         
   95 00000036         ; Atualiza temperatura
   96 00000036 45DA            cmp              r10, r11
   97 00000038 D009            beq              Temp_igual
   98 0000003A DC01            bgt              Temp_maior
   99 0000003C DB0C            blt              Temp_menor
  100 0000003E         
  101 0000003E         
  102 0000003E E7ED            B                MainLoop
  103 00000040         
  104 00000040         Temp_maior
  105 00000040 F1AA 0A01       sub              r10, r10, #1
  106 00000044 F7FF FFFE       bl               Acende_LED_N1
  107 00000048 F7FF FFFE       bl               Apaga_LED_N0
  108 0000004C E7E6            B                MainLoop
  109 0000004E         
  110 0000004E         Temp_igual
  111 0000004E F7FF FFFE       bl               Acende_LED_N0
  112 00000052 F7FF FFFE       bl               Acende_LED_N1
  113 00000056 E7E1            B                MainLoop
  114 00000058         
  115 00000058         
  116 00000058         Temp_menor
  117 00000058 F10A 0A01       add              r10, r10, #1
  118 0000005C F7FF FFFE       bl               Acende_LED_N0
  119 00000060 F7FF FFFE       bl               Apaga_LED_N1
  120 00000064 E7DA            B                MainLoop
  121 00000066         
  122 00000066 00 00           ALIGN
  123 00000068                 END
Command Line: --debug --xref --diag_suppress=9931,A1950W --cpu=Cortex-M4.fp.sp 
--depend=.\objects\main.d -o.\objects\main.o -IC:\Users\rafae\AppData\Local\Arm
\Packs\Keil\TM4C_DFP\1.1.0\Device\Include\TM4C129 --predefine="__EVAL SETA 1" -
-predefine="__UVISION_VERSION SETA 543" --predefine="TM4C1294NCPDT SETA 1" --li
st=.\listings\main.lst main.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

DATA 00000000

Symbol: DATA
   Definitions
      At line 20 in file main.s
   Uses
      None
Comment: DATA unused
1 symbol



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

.text 00000000

Symbol: .text
   Definitions
      At line 31 in file main.s
   Uses
      None
Comment: .text unused
Loop_1s 00000020

Symbol: Loop_1s
   Definitions
      At line 86 in file main.s
   Uses
      At line 93 in file main.s
Comment: Loop_1s used once
MainLoop 0000001C

Symbol: MainLoop
   Definitions
      At line 78 in file main.s
   Uses
      At line 102 in file main.s
      At line 108 in file main.s
      At line 113 in file main.s
      At line 120 in file main.s

Start 00000000

Symbol: Start
   Definitions
      At line 67 in file main.s
   Uses
      At line 34 in file main.s
Comment: Start used once
Temp_igual 0000004E

Symbol: Temp_igual
   Definitions
      At line 110 in file main.s
   Uses
      At line 97 in file main.s
Comment: Temp_igual used once
Temp_maior 00000040

Symbol: Temp_maior
   Definitions
      At line 104 in file main.s
   Uses
      At line 98 in file main.s
Comment: Temp_maior used once
Temp_menor 00000058

Symbol: Temp_menor
   Definitions
      At line 116 in file main.s
   Uses
      At line 99 in file main.s
Comment: Temp_menor used once



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

7 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

Acende_LED_N0 00000000

Symbol: Acende_LED_N0
   Definitions
      At line 50 in file main.s
   Uses
      At line 111 in file main.s
      At line 118 in file main.s

Acende_LED_N1 00000000

Symbol: Acende_LED_N1
   Definitions
      At line 52 in file main.s
   Uses
      At line 106 in file main.s
      At line 112 in file main.s

Apaga_LED_N0 00000000

Symbol: Apaga_LED_N0
   Definitions
      At line 51 in file main.s
   Uses
      At line 107 in file main.s
Comment: Apaga_LED_N0 used once
Apaga_LED_N1 00000000

Symbol: Apaga_LED_N1
   Definitions
      At line 53 in file main.s
   Uses
      At line 119 in file main.s
Comment: Apaga_LED_N1 used once
Configura_Interrupts 00000000

Symbol: Configura_Interrupts
   Definitions
      At line 45 in file main.s
   Uses
      At line 71 in file main.s
Comment: Configura_Interrupts used once
Escreve_Display_Decimo 00000000

Symbol: Escreve_Display_Decimo
   Definitions
      At line 47 in file main.s
   Uses
      At line 87 in file main.s
Comment: Escreve_Display_Decimo used once
Escreve_Display_Unitario 00000000

Symbol: Escreve_Display_Unitario
   Definitions
      At line 48 in file main.s
   Uses
      At line 88 in file main.s
Comment: Escreve_Display_Unitario used once
Escreve_LEDs 00000000



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
External symbols


Symbol: Escreve_LEDs
   Definitions
      At line 49 in file main.s
   Uses
      At line 89 in file main.s
Comment: Escreve_LEDs used once
GPIO_Init 00000000

Symbol: GPIO_Init
   Definitions
      At line 43 in file main.s
   Uses
      At line 70 in file main.s
Comment: GPIO_Init used once
PLL_Init 00000000

Symbol: PLL_Init
   Definitions
      At line 40 in file main.s
   Uses
      At line 68 in file main.s
Comment: PLL_Init used once
PortN_Output 00000000

Symbol: PortN_Output
   Definitions
      At line 44 in file main.s
   Uses
      None
Comment: PortN_Output unused
SysTick_Init 00000000

Symbol: SysTick_Init
   Definitions
      At line 41 in file main.s
   Uses
      At line 69 in file main.s
Comment: SysTick_Init used once
SysTick_Wait1ms 00000000

Symbol: SysTick_Wait1ms
   Definitions
      At line 42 in file main.s
   Uses
      None
Comment: SysTick_Wait1ms unused
13 symbols
355 symbols in table
